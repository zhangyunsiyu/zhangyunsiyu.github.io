<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《js笔记》 | zhangyun&#39;s blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="manifest" href="/photo.jpg">
    <link rel="apple-touch-icon" href="/photo.jpg">
    <meta name="description" content="张赟的个人博客">
    <link rel="preload" href="/assets/css/0.styles.3ef2f377.css" as="style"><link rel="preload" href="/assets/js/app.37e78cb7.js" as="script"><link rel="preload" href="/assets/js/2.0887c104.js" as="script"><link rel="preload" href="/assets/js/13.45cbbf1b.js" as="script"><link rel="prefetch" href="/assets/js/10.3cc1de35.js"><link rel="prefetch" href="/assets/js/11.25433335.js"><link rel="prefetch" href="/assets/js/12.0bf329d1.js"><link rel="prefetch" href="/assets/js/14.329ef4dc.js"><link rel="prefetch" href="/assets/js/15.142231f2.js"><link rel="prefetch" href="/assets/js/16.b18b9ecc.js"><link rel="prefetch" href="/assets/js/17.0d58aa02.js"><link rel="prefetch" href="/assets/js/18.1e77237e.js"><link rel="prefetch" href="/assets/js/19.90af3596.js"><link rel="prefetch" href="/assets/js/20.820bcbfe.js"><link rel="prefetch" href="/assets/js/21.9d85971e.js"><link rel="prefetch" href="/assets/js/22.37700312.js"><link rel="prefetch" href="/assets/js/23.3dd67b96.js"><link rel="prefetch" href="/assets/js/24.cc5bb461.js"><link rel="prefetch" href="/assets/js/25.c1ce8373.js"><link rel="prefetch" href="/assets/js/26.86931b30.js"><link rel="prefetch" href="/assets/js/27.ddf308b8.js"><link rel="prefetch" href="/assets/js/3.f0bae693.js"><link rel="prefetch" href="/assets/js/4.3b9d3d22.js"><link rel="prefetch" href="/assets/js/5.0d322686.js"><link rel="prefetch" href="/assets/js/6.3deaa008.js"><link rel="prefetch" href="/assets/js/7.dc4d4a75.js"><link rel="prefetch" href="/assets/js/8.56191d34.js"><link rel="prefetch" href="/assets/js/9.a302443b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3ef2f377.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">zhangyun's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端总结" class="dropdown-title"><span class="title">前端总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/WEB/" class="nav-link">
  WEB基础
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/JavaScript/" class="nav-link router-link-active">
  JavaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/Vue/" class="nav-link">
  Vue笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/React/" class="nav-link">
  React笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序总结" class="dropdown-title"><span class="title">小程序总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/miniApp/wechatApp/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-item"><!----> <a href="/miniApp/alipayApp/" class="nav-link">
  支付宝小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端总结" class="dropdown-title"><span class="title">服务端总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/serveEnd/NodeJs/" class="nav-link">
  NodeJs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="混合app" class="dropdown-title"><span class="title">混合app</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/app/cordova/" class="nav-link">
  cordova
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="感动常在" class="dropdown-title"><span class="title">感动常在</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mySpace/essay/" class="nav-link">
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/mySpace/photo/" class="nav-link">
  摄影随笔
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端总结" class="dropdown-title"><span class="title">前端总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/WEB/" class="nav-link">
  WEB基础
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/JavaScript/" class="nav-link router-link-active">
  JavaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/Vue/" class="nav-link">
  Vue笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/React/" class="nav-link">
  React笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序总结" class="dropdown-title"><span class="title">小程序总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/miniApp/wechatApp/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-item"><!----> <a href="/miniApp/alipayApp/" class="nav-link">
  支付宝小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端总结" class="dropdown-title"><span class="title">服务端总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/serveEnd/NodeJs/" class="nav-link">
  NodeJs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="混合app" class="dropdown-title"><span class="title">混合app</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/app/cordova/" class="nav-link">
  cordova
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="感动常在" class="dropdown-title"><span class="title">感动常在</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mySpace/essay/" class="nav-link">
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/mySpace/photo/" class="nav-link">
  摄影随笔
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontEnd/JavaScript/" class="sidebar-link">写在前面</a></li><li><a href="/frontEnd/JavaScript/note.html" class="active sidebar-link">《js笔记》</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#面向对象编程" class="sidebar-link">面向对象编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#es5写法" class="sidebar-link">es5写法</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#es6写法" class="sidebar-link">es6写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#js-设计模式" class="sidebar-link">js'设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#订阅-发布模式-观察者" class="sidebar-link">订阅/发布模式 (观察者)</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#策略模式" class="sidebar-link">策略模式</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#代理模式" class="sidebar-link">代理模式</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#中介者模式" class="sidebar-link">中介者模式</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#装饰器模式-重要" class="sidebar-link">装饰器模式(重要)</a></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#工厂模式" class="sidebar-link">工厂模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontEnd/JavaScript/note.html#js常见技巧" class="sidebar-link">js常见技巧</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="面向对象编程"><a href="#面向对象编程" class="header-anchor">#</a> 面向对象编程</h2> <h3 id="es5写法"><a href="#es5写法" class="header-anchor">#</a> es5写法</h3> <p>写法不统一 , 千人千面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">show</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//-------------------------------------------</span>

    <span class="token keyword">function</span> <span class="token function">Worker</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token operator">=</span>job<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Worker</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Worker</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">=</span>Worker<span class="token punctuation">;</span>

    <span class="token class-name">Worker</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showJob</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> w<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'打杂的'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    w<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    w<span class="token punctuation">.</span><span class="token function">showJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="es6写法"><a href="#es6写法" class="header-anchor">#</a> es6写法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//--------------------------------------</span>

    <span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token operator">=</span>job<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">showJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p>核心概念: 垃圾回收 - 为了替程序员释放内存 , 预防内存泄漏
本质上: 底层 &gt; 堆栈 ; 高层 &gt; 把函数当成对象来处理</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// es6之前的写法</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;aaa&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;bbb&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;ccc&quot;</span><span class="token operator">&gt;</span>

    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> aBtn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>aBtn<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 因为onclick需要用到i这个参数 , 所以i不会被回收</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          aBtn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// es6直接使用let来定义i</span>
</code></pre></div><h2 id="js-设计模式"><a href="#js-设计模式" class="header-anchor">#</a> js'设计模式</h2> <blockquote><p>设计模式（Design Pattern）是⼀套被反复使⽤、多数⼈知晓的、经过分类的、代码设计经验的总结。</p></blockquote> <h3 id="订阅-发布模式-观察者"><a href="#订阅-发布模式-观察者" class="header-anchor">#</a> 订阅/发布模式 (观察者)</h3> <blockquote><p>一个函数中调用另一个函数的方法,通常会造成高度的耦合 , 一旦其中一个方法改变了 , 会造成连锁反应 ,甚至是出现bug
采用订阅发布模式可以解耦,方法之间也不再是强依赖<br>
在这种模式中，并不是⼀个对象调⽤另⼀个对象的⽅法，⽽是⼀个对象订阅另⼀个对象的 特定活动并在
状态改编后获得通知。订阅者因此也成为观察者，⽽被观察的对象成为发布者或者主题。当发⽣了⼀个
重要事件时候 发布者会通知（调⽤）所有订阅者并且可能经常已事件对象的形式传递消息</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 参考vue源码 , 实现一个最简单的订阅发布模式</span>
<span class="token keyword">class</span> <span class="token class-name">Event</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token comment">// 存储所有回调事件</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">$off</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> cbs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cbs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            	<span class="token comment">// 使用call修正一下this,并传递参数</span>
                <span class="token function">c</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">$on</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'事件1'</span><span class="token punctuation">,</span>arg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'事件111'</span><span class="token punctuation">,</span>arg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'event2'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'事件2'</span><span class="token punctuation">,</span>arg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'测试一'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'event2'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'测试二'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

event<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'测试三'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h3> <blockquote><p>单例模式的定义：保证⼀个类仅有⼀个实例，并提供⼀个访问它的全局访问点。实现的⽅法为先
判断实例存在与否，如果存在则直接返回，如果不存在就创建了再返回，这就确保了⼀个类只有
⼀个实例对象。
使用场景: ⼀个单⼀对象。⽐如：弹窗，⽆论点击多少次，弹窗只应该被创建⼀次' 实现起来也很简
单，⽤⼀个变量缓存即可</p></blockquote> <h4 id="单例模式-全局唯一的弹框"><a href="#单例模式-全局唯一的弹框" class="header-anchor">#</a> 单例模式 - 全局唯一的弹框</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
        <span class="token punctuation">.</span>model<span class="token punctuation">{</span>
            border<span class="token operator">:</span><span class="token number">1</span>px solid black<span class="token punctuation">;</span>
            position<span class="token operator">:</span> fixed<span class="token punctuation">;</span>
            width<span class="token operator">:</span><span class="token number">300</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span><span class="token number">300</span>px<span class="token punctuation">;</span>
            top<span class="token operator">:</span><span class="token number">20</span><span class="token operator">%</span><span class="token punctuation">;</span>
            left<span class="token operator">:</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
            margin<span class="token operator">-</span>left<span class="token operator">:</span><span class="token operator">-</span><span class="token number">150</span>px<span class="token punctuation">;</span>
            text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;loginBtn&quot;</span><span class="token operator">&gt;</span>点我<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        
        <span class="token keyword">var</span> <span class="token function-variable function">getSingle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> result<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> result <span class="token operator">||</span> <span class="token punctuation">(</span> result <span class="token operator">=</span> <span class="token function">fn</span> <span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">createLoginLayer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> <span class="token string">'div'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'我是登录浮窗'</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'model'</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>  
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> div <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> div<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> createSingleLoginLayer <span class="token operator">=</span> <span class="token function">getSingle</span><span class="token punctuation">(</span> createLoginLayer <span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'loginBtn'</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token keyword">var</span> loginLayer <span class="token operator">=</span> <span class="token function">createSingleLoginLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    loginLayer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>



<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h3 id="策略模式"><a href="#策略模式" class="header-anchor">#</a> 策略模式</h3> <blockquote><p>定义⼀系列的算法，把他们⼀个个封装起来，并且使他们可以相互替换。
策略模式的⽬的就是将算法的使⽤算法的实现分离开来。
⼀个基于策略模式的程序⾄少由两部分组成。第⼀个部分是⼀组策略类（可变），策略类封装了具体的
算法，并负责具体的计算过程。第⼆个部分是环境类Context（不变），Context接受客户的请求，随后
将请求委托给某⼀个策略类。要做到这⼀点，说明Context中要维持对某个策略对象的引⽤</p></blockquote> <h4 id="策略模式-简单的算法策略"><a href="#策略模式-简单的算法策略" class="header-anchor">#</a> 策略模式 - 简单的算法策略</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//计算工资 , 使用一般写法</span>
<span class="token keyword">var</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">performanceLevel<span class="token punctuation">,</span> salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'S'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'A'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'B'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出:40000</span>
<span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token number">6000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出:24000</span>

<span class="token comment">// 使用策略模式</span>
<span class="token keyword">var</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token string">&quot;S&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token string">&quot;A&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token string">&quot;B&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">level<span class="token punctuation">,</span> salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> strategies<span class="token punctuation">[</span> level <span class="token punctuation">]</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出:80000</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出:30000</span>
</code></pre></div><h4 id="策略模式-实现表单验证"><a href="#策略模式-实现表单验证" class="header-anchor">#</a> 策略模式 - 实现表单验证</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token function-variable function">isNonEmpty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> errorMsg <span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token function-variable function">minLength</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> length<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> length <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token function-variable function">isMobile</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ⼿机号码格式</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex">/(^1[3|5|8][0-9]{9}$)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Validator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 保存校验规则</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Validator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>
 <span class="token keyword">var</span> ary <span class="token operator">=</span> rule<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> <span class="token string">':'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//</span>
 <span class="token keyword">var</span> strategy <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 ary<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span> dom<span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">;</span>
 ary<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
 <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>strategy<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> ary<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Validator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> validatorFunc<span class="token punctuation">;</span> validatorFunc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token function">validatorFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始校验，并取得校验后的返回信息</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> msg <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果有确切的返回值，说明校验没有通过</span>
 <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">validataFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建⼀个 validator 对象</span>
 <span class="token comment">/***************添加⼀些校验规则****************/</span>
 validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>userName<span class="token punctuation">,</span> <span class="token string">'isNonEmpty'</span><span class="token punctuation">,</span> <span class="token string">'⽤户名不能为空'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

 validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>password<span class="token punctuation">,</span> <span class="token string">'minLength:6'</span><span class="token punctuation">,</span> <span class="token string">'密码⻓度不能少于 6位'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">,</span> <span class="token string">'isMobile'</span><span class="token punctuation">,</span> <span class="token string">'⼿机号码格式不正确'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> errorMsg <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获得校验结果</span>
 <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span> <span class="token comment">// 返回校验结果</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'registerForm'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
registerForm<span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> errorMsg <span class="token operator">=</span> <span class="token function">validataFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 errorMsg 有确切的返回值，说明未通过校验</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span> <span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 阻⽌表单提交</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h3> <blockquote><p>代理模式的定义：为⼀个对象提供⼀个代⽤品或占位符，以便控制对它的访问。
常⽤的虚拟代理形式：某⼀个花销很⼤的操作，可以通过虚拟代理的⽅式延迟到这种需要它的时候才去
创建（例：使⽤虚拟代理实现图⽚懒加载）
图⽚懒加载的⽅式：先通过⼀张loading图占位，然后通过异步的⽅式加载图⽚，等图⽚加载好了再把
完成的图⽚加载到img标签⾥⾯。
假设我们在做⼀个⽂件同步的功能，当我们选中⼀个 checkbox 的时候，它对应的⽂件就会被同 步到另
外⼀台备⽤服务器上⾯。当⼀次选中过多时，会产⽣频繁的⽹络请求。将带来很⼤的开销。可以通过⼀
个代理函数 proxySynchronousFile 来收集⼀段时间之内的请求， 最后⼀次性发送给服务器</p></blockquote> <h4 id="代理模式-图片懒加载"><a href="#代理模式-图片懒加载" class="header-anchor">#</a> 代理模式-图片懒加载</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个本体对象</span>
<span class="token keyword">var</span> pageImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 创建标签</span>
  <span class="token keyword">var</span> imgNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> <span class="token string">'img'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 添加到页面</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> imgNode <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置图片的src</span>
    <span class="token function-variable function">setSrc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">src</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 更改src</span>
      imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 预加载 loading</span>
 pageImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1577768134810&amp;di=fbbf8c463b60e93573d61b8f88ea9593&amp;imgtype=0&amp;src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F16f7121aedf9990f3ddd8725e99fe4d8369e06692d18-J0TUcl_fw658'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建代理对象</span>
<span class="token keyword">var</span> proxyImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 创建一个新的img标签</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">;</span>
  <span class="token comment">// img 加载完成事件</span>
  img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 调用 myImage 替换src方法</span>
    pageImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>src <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 代理设置地址</span>
    <span class="token function-variable function">setSrc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">src</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
     
      <span class="token comment">// 赋值正常图片地址</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    proxyImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span> <span class="token string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1577767811777&amp;di=e9de4d45feb4f47356a366bd1065b921&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D2962937242%2C1933230585%26fm%3D214%26gp%3D0.jpg'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="代理模式-函数防抖-节流"><a href="#代理模式-函数防抖-节流" class="header-anchor">#</a> 代理模式 - 函数防抖/节流</h4> <div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><h3 id="中介者模式"><a href="#中介者模式" class="header-anchor">#</a> 中介者模式</h3> <blockquote><p>redux , vuex都是中介者模式的应用 ,我们把共享的数据，抽离成⼀个单独的store， 每个都通
过store这个中介来操作对象</p></blockquote> <h3 id="装饰器模式-重要"><a href="#装饰器模式-重要" class="header-anchor">#</a> 装饰器模式(重要)</h3> <blockquote><p>装饰者模式的定义：在不改变对象⾃身的基础上，在程序运⾏期间给对象动态地添加⽅法。常⻅应⽤，
react的⾼阶组件, 或者react-redux中的@connect 或者⾃⼰定义⼀些⾼阶组件</p></blockquote> <h3 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h3> <h4 id="工厂模式-通知功能的实现"><a href="#工厂模式-通知功能的实现" class="header-anchor">#</a> 工厂模式 - 通知功能的实现</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 源码地址 https://github.com/ElemeFE/element/blob/dev/packages/notification/src/main.js#L11</span>
<span class="token keyword">const</span> <span class="token function-variable function">Notification</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$isServer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
 options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> userOnClose <span class="token operator">=</span> options<span class="token punctuation">.</span>onClose<span class="token punctuation">;</span>
 <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token string">'notification_'</span> <span class="token operator">+</span> seed<span class="token operator">++</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> position <span class="token operator">=</span> options<span class="token punctuation">.</span>position <span class="token operator">||</span> <span class="token string">'top-right'</span><span class="token punctuation">;</span>
 options<span class="token punctuation">.</span><span class="token function-variable function">onClose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 Notification<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> userOnClose<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NotificationConstructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 data<span class="token operator">:</span> options
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isVNode</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 instance<span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token punctuation">[</span>options<span class="token punctuation">.</span>message<span class="token punctuation">]</span><span class="token punctuation">;</span>
 options<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'REPLACED_BY_VNODE'</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 instance<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
 instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
 instance<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 instance<span class="token punctuation">.</span>dom <span class="token operator">=</span> instance<span class="token punctuation">.</span>$el<span class="token punctuation">;</span>
 instance<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> PopupManager<span class="token punctuation">.</span><span class="token function">nextZIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">let</span> verticalOffset <span class="token operator">=</span> options<span class="token punctuation">.</span>offset <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
 instances<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>position <span class="token operator">===</span> position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 verticalOffset <span class="token operator">+=</span> item<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>offsetHeight <span class="token operator">+</span> <span class="token number">16</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 verticalOffset <span class="token operator">+=</span> <span class="token number">16</span><span class="token punctuation">;</span>
 instance<span class="token punctuation">.</span>verticalOffset <span class="token operator">=</span> verticalOffset<span class="token punctuation">;</span>
 instances<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="js常见技巧"><a href="#js常见技巧" class="header-anchor">#</a> js常见技巧</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 : 求两个数组并集 , 交集 , 差集</span>

<span class="token comment">// 并集</span>
<span class="token keyword">function</span> <span class="token function">binji</span> <span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span>arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span><span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 交集</span>
<span class="token keyword">function</span> <span class="token function">jiaoji</span> <span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span>arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span> arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> arr3<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">!=</span> arr3<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr3<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 差集</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontEnd/JavaScript/" class="prev router-link-active">
        写在前面
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.37e78cb7.js" defer></script><script src="/assets/js/2.0887c104.js" defer></script><script src="/assets/js/13.45cbbf1b.js" defer></script>
  </body>
</html>
